# Copier configuration for SaaS Boilerplate
# https://copier.readthedocs.io/

_min_copier_version: "9.0.0"

_subdirectory: template

_templates_suffix: ""

# ====================
# Project Information
# ====================

project_name:
  type: str
  help: "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼ˆä¾‹: My SaaS Appï¼‰"
  validator: "{% if not project_name %}ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã¯å¿…é ˆã§ã™{% endif %}"

project_slug:
  type: str
  help: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒ©ãƒƒã‚°ï¼ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã«ä½¿ç”¨ï¼‰
  default: "{{ project_name | lower | replace(' ', '-') | replace('_', '-') }}"

project_description:
  type: str
  help: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®èª¬æ˜
  default: "AIé§†å‹•é–‹ç™ºã«æœ€é©åŒ–ã•ã‚ŒãŸSaaSã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³"

# ====================
# AI Coding Agent Selection
# ====================

ai_coding_agent:
  type: str
  help: ä½¿ç”¨ã™ã‚‹AI Codingã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
  default: "both"
  choices:
    - both
    - claude-code
    - github-copilot

# ====================
# Preset Selection
# ====================

preset:
  type: str
  help: |
    ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’é¸æŠã—ã¦ãã ã•ã„:
    - minimal: æœ€å°æ§‹æˆï¼ˆå­¦ç¿’ãƒ»PoCå‘ã‘ï¼‰
    - standard: ãƒãƒ¼ãƒ é–‹ç™ºå‘ã‘ï¼ˆE2E + PRãƒã‚§ãƒƒã‚¯ + ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ + ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰
    - aws: AWSæœ¬ç•ªç’°å¢ƒå‘ã‘ï¼ˆCognito + S3 + CDK + å…¨æ©Ÿèƒ½ï¼‰
  default: "standard"
  choices:
    - minimal
    - standard
    - aws

# ====================
# Computed Internal Flags
# ====================

_enable_e2e:
  type: bool
  default: "{{ preset in ['standard', 'aws'] }}"
  when: false

_enable_aws_auth:
  type: bool
  default: "{{ preset == 'aws' }}"
  when: false

_enable_aws_storage:
  type: bool
  default: "{{ preset == 'aws' }}"
  when: false

_enable_aws_infra:
  type: bool
  default: "{{ preset == 'aws' }}"
  when: false

_enable_extended_docs:
  type: bool
  default: "{{ preset in ['standard', 'aws'] }}"
  when: false

_enable_pr_checks:
  type: bool
  default: "{{ preset in ['standard', 'aws'] }}"
  when: false

_enable_security:
  type: bool
  default: "{{ preset in ['standard', 'aws'] }}"
  when: false

# ====================
# AWS Configuration (conditional)
# ====================

aws_region:
  type: str
  help: AWSãƒªãƒ¼ã‚¸ãƒ§ãƒ³
  default: ap-northeast-1
  when: "{{ preset == 'aws' }}"
  choices:
    - ap-northeast-1
    - ap-northeast-3
    - us-east-1
    - us-west-2
    - eu-west-1

# ====================
# Exclude patterns based on selections
# ====================

_exclude:
  # E2E tests
  - "{{ 'frontend/tests/e2e' if not _enable_e2e }}"
  - "{{ 'frontend/playwright.config.ts' if not _enable_e2e }}"
  # AWS auth (Cognito implementation only - base.py and factory.py are always included)
  - "{{ 'backend/src/adapters/auth/cognito.py' if not _enable_aws_auth }}"
  # AWS storage (S3 implementation only - base.py, local.py, factory.py are always included)
  - "{{ 'backend/src/adapters/storage/s3.py' if not _enable_aws_storage }}"
  # Infrastructure
  - "{{ 'infrastructure' if not _enable_aws_infra }}"
  # Extended docs
  - "{{ 'docs/frontend' if not _enable_extended_docs }}"
  - "{{ 'docs/backend' if not _enable_extended_docs }}"
  - "{{ 'docs/infrastructure' if not _enable_extended_docs or not _enable_aws_infra }}"
  - "{{ 'docs/operations' if not _enable_extended_docs }}"
  # PR checks workflow
  - "{{ '.github/workflows/pr-check.yml' if not _enable_pr_checks }}"
  - "{{ '.github/labeler.yml' if not _enable_pr_checks }}"
  # Security workflows
  - "{{ '.github/workflows/security.yml' if not _enable_security }}"
  - "{{ '.github/workflows/coverage.yml' if not _enable_security }}"
  # AI agent files
  - "{{ '.github/copilot-instructions.md' if ai_coding_agent == 'claude-code' }}"
  - "{{ 'CLAUDE.md' if ai_coding_agent == 'github-copilot' }}"
  - "{{ 'AGENTS.md' if ai_coding_agent == 'github-copilot' }}"

# ====================
# Tasks (post-generation hooks)
# ====================

_tasks:
  - "echo ''"
  - "echo 'âœ… ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ {{ project_name }} ã‚’ä½œæˆã—ã¾ã—ãŸï¼'"
  - "echo ''"
  - "echo 'ğŸ“¦ ãƒ—ãƒªã‚»ãƒƒãƒˆ: {{ preset }}'"
  - "echo ''"
  - "echo 'ğŸ“‹ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †:'"
  - "echo '  1. cd {{ project_slug }}'"
  - "echo '  2. make setup'"
  - "echo '  3. make dev'"
  - "echo '  4. http://localhost:3000 ã«ã‚¢ã‚¯ã‚»ã‚¹'"
  - "echo ''"
  - "echo 'ğŸ” ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ã‚¶ãƒ¼: test@example.com / password'"
  - "echo ''"
